local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local playerGui = LocalPlayer:WaitForChild("PlayerGui")

-- 保存自定义跳跃高度
local customJump = nil

-- 应用跳跃高度
local function applyJump(character)
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid and customJump then
        humanoid.UseJumpPower = true
        humanoid.JumpPower = customJump
    end
end

-- 每次角色生成时应用最新的 customJump
LocalPlayer.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid")
    applyJump(character)
end)

-- 创建输入框弹窗
local function createJumpInputWindow()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "JumpInputGui"
    screenGui.Parent = playerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 300, 0, 150)
    frame.Position = UDim2.new(0.5, -150, 0.5, -75)
    frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    frame.Parent = screenGui

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 30)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "设置跳跃高度"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Parent = frame

    local jumpBox = Instance.new("TextBox")
    jumpBox.Size = UDim2.new(1, -20, 0, 40)
    jumpBox.Position = UDim2.new(0, 10, 0, 50)
    jumpBox.PlaceholderText = "输入高度（>=50）"
    jumpBox.Text = customJump and tostring(customJump) or ""
    jumpBox.ClearTextOnFocus = true
    jumpBox.TextColor3 = Color3.fromRGB(0,0,0)
    jumpBox.BackgroundColor3 = Color3.fromRGB(255,255,255)
    jumpBox.Parent = frame

    local confirmBtn = Instance.new("TextButton")
    confirmBtn.Size = UDim2.new(0.5, -15, 0, 30)
    confirmBtn.Position = UDim2.new(0, 10, 0, 110)
    confirmBtn.Text = "确定"
    confirmBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    confirmBtn.TextColor3 = Color3.fromRGB(255,255,255)
    confirmBtn.Parent = frame

    local cancelBtn = Instance.new("TextButton")
    cancelBtn.Size = UDim2.new(0.5, -15, 0, 30)
    cancelBtn.Position = UDim2.new(0.5, 5, 0, 110)
    cancelBtn.Text = "取消"
    cancelBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    cancelBtn.TextColor3 = Color3.fromRGB(255,255,255)
    cancelBtn.Parent = frame

    -- 确定按钮逻辑
    confirmBtn.MouseButton1Click:Connect(function()
        local value = tonumber(jumpBox.Text)
        if value and value >= 50 then
            -- 始终覆盖 customJump
            customJump = value  

            -- 应用到当前角色
            if LocalPlayer.Character then
                applyJump(LocalPlayer.Character)
            end

            screenGui:Destroy()
        else
            jumpBox.Text = ""
            jumpBox.PlaceholderText = "请输入 >= 50 的数字"
        end
    end)

    cancelBtn.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)
end

-- 调用方法
createJumpInputWindow()
